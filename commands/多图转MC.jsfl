//fl.trace("test");//var code=FLfile.read("///Volumes/hd2/workspace/newGame/res/a.txt");//fl.trace("c:"+code);//fl.trace(fl.configURI);function start(){	fl.outputPanel.clear();	var mcName = "test";	var curVersion = getFlashVersion();	var mcName = prompt("请输入名称");	if (((mcName == null) || mcName == ""))	{		alert("名称不能为空");		return;	}	var filePath = fl.browseForFileURL("open","打开资源文件");	if ((filePath == null))	{		return;	}	var pathArr = filePath.split(".");	var picDirt = pathArr[0] + "all/";	var extStr = pathArr[pathArr.length - 1];	if ((extStr != "txt"))	{		alert("只能选择文本文件");		return;	}	var posSet = FLfile.read(filePath);	fl.createDocument();	var dom = fl.getDocumentDOM();	var lib = dom.library;	lib.addNewItem('movie clip',"pic");	lib.editItem("pic");	ergodicFolder(picDirt,dom);	//fl.trace(posSet);	var picList = posSet.split(";");	var tline = dom.getTimeline();	for (var i = 0; i < picList.length; i++)	{		//fl.trace(("i:" + i));		var list = picList[i].split(",");		var pngName = 't' + list[1];		var isSelect = lib.selectItem(pngName);		if (! isSelect)		{			pngName +=  '.png';			lib.selectItem(pngName);		}		var xpos = parseInt(list[2]);		var ypos = parseInt(list[3]);		//lib.addItemToDocument({x:xpos,y:ypos});		//fl.trace(((xpos + ":") + ypos));		lib.addItemToDocument({x:0,y:0});		dom.selectAll();		dom.setElementProperty("x",xpos);		dom.setElementProperty("y",ypos);		if ((i < picList.length - 1))		{			tline.insertBlankKeyframe();		}		//tline.convertToBlankKeyframes();	}	return;	//移动元件	var folderName =  +  "pngs_" + mcName;	lib.newFolder(folderName);	for each (var item in lib.items)	{		//var item =lib[i]; 		fl.trace(item.name);		if (item.name != folderName && item.name.indexOf("png") != -1)		{			lib.moveToFolder(folderName,item.name);			item.name = item.name;		}		if (item.name == "pic")		{			item.name = mcName;		}	}	fl.outputPanel.clear();}start();function getFlashVersion(){	var flVersion = fl.version;	var flarr = flVersion.split(" ");	var platform = flarr[0];	var v = flarr[1].split(",");	var curVersion = v[0];	return curVersion;}//ergodicFolder(picDirt);//var code=FLfile.read(filePath);//fl.trace(code);//var dom =fl.getDocumentDOM();//dom.importFile();/** * 导入文件到库 * 并生成包含此文件的元件 * @document 文档引用 * @filePath 导入的文件路径 * @packageName 包名, 若无包名，则无需填写；如果有，则以"."结尾 */function importFile(document,filePath,packageName){	//fl.trace(("im:" + filePath));	document.importFile(filePath,true);}/** * 遍历文件夹 * @path 文件夹路径，以"/"或者"\\"结尾 * @packageName 包名，, 若无包名，则无需填写；如果有，则以"."结尾 */function ergodicFolder(path,dom){	var files = FLfile.listFolder(path,"files");	if ((files != null))	{		for (var i = 0; i < files.length; i++)		{			var fileName = files[i];			if ((fileName == ".DS_Store"))			{				continue;			}			var file = path + fileName;			if (! dom.library.itemExists(fileName))			{				importFile(dom,file);			}		}	}	var folders = FLfile.listFolder(path,"directories");	if ((folders != null))	{		for (var i = 0; i < folders.length; i++)		{			ergodicFolder(((path + folders[i]) + "/"));		}	}}